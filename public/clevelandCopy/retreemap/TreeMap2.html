<!DOCTYPE html>
<div id="container"></div>
<script type="module">

    import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

    const width = 400;
    const height = 600;

    const x1 = 30;
    const x2 = 15;
    const x3 = 5;
    const x4 = 25;
    const x5 = 10;
    const x6 = 15;

    // Fake data
    const data = {
        name: 'Root',
        children: [
            {name: 'A', value: x1 },
            {name: 'B', value: x2 },
            {name: 'C', value: x3 },
            {name: 'D', value: x4 },
            {name: 'E', value: x5 },
            {name: 'F', value: x6 }
        ],
    };

    console.log(d3);

    // Create the svg
    const svg = d3.create("svg")
        .attr('width', width)
        .attr('height', height);
    ///    .style('font', '10px sans-serif'); // No longer need to declare a font

    // Append the svg to the container
    document.getElementById('container').appendChild(svg.node());

    const root = d3.hierarchy(data).sum(d => d.value);

    d3.treemap()
        .size([width, height])
        .padding(1)
        (root);

    const leaf = svg.selectAll('g')
        .data(root.leaves())
        .join('g')
        .attr('transform', d => `translate(${d.x0}, ${d.y0})`);

    leaf.append('rect')
        .attr('fill', 'white')
        .attr('stroke', 'black')
        .attr('stroke-width', '3px')
        .attr('width', d => d.x1 - d.x0)
        .attr('height', d => d.y1 - d.y0);

    leaf.filter(d => d.data.name === 'A' || d.data.name === 'B')
        .append('circle')
        .attr('cx', d => (d.x1 - d.x0) / 2)
        .attr('cy', d => (d.y1 - d.y0) / 2)
        .attr('r', 5)
        .style('fill', 'black');

</script>

